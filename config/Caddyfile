# Caddyfile configuration for HTTPS reverse proxy
# Caddy automatically handles HTTPS with Let's Encrypt

# Replace with your domain name or IP
your-domain.com {
    # Reverse proxy to FastAPI application
    reverse_proxy localhost:3000
    
    # Enable compression
    encode gzip zstd
    
    # Security headers
    header {
        # Security headers
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        X-XSS-Protection "1; mode=block"
        Referrer-Policy "strict-origin-when-cross-origin"
    }
}

# If you only have an IP address (less secure, but works)
# Replace with your public IP
# :443 {
#     reverse_proxy localhost:3000
#     tls internal
# }

# HTTP to HTTPS redirect (optional, Caddy does this automatically)
# But you can be explicit:
http://your-domain.com {
    redir https://your-domain.com{uri}
}

