# Caddyfile configuration for HTTPS reverse proxy
# Caddy automatically handles HTTPS with Let's Encrypt

# OPTION 1: If you have a domain name (recommended for Gmail)
# Uncomment and replace with your domain:
# your-domain.com {
#     reverse_proxy http-server:3000
#     encode gzip zstd
#     header {
#         Strict-Transport-Security "max-age=31536000; includeSubDomains"
#         X-Content-Type-Options "nosniff"
#         X-Frame-Options "DENY"
#         X-XSS-Protection "1; mode=block"
#         Referrer-Policy "strict-origin-when-cross-origin"
#     }
# }

# OPTION 2: Using public IP address (93.90.162.141)
# Note: Self-signed certificate (browser warning, may not work in Gmail)
:443 {
    reverse_proxy http-server:3000
    tls internal
    encode gzip zstd
    header {
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        X-XSS-Protection "1; mode=block"
    }
}

# OPTION 3: HTTP on port 80 (for immediate access)
# This handles HTTP requests on port 80
:80 {
    reverse_proxy http-server:3000
    encode gzip zstd
    header {
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        X-XSS-Protection "1; mode=block"
    }
}

# OPTION 4: Free domain services (recommended!)
# Use DuckDNS, No-IP, or Freenom for free domain
# Then use OPTION 1 with your free domain name

